diff -urN -X dontdiff linux-2.4.20-1.1931.2.90.ent/arch/s390x/Makefile linux-2.4.20-2.1.27.z2/arch/s390x/Makefile
--- linux-2.4.20-1.1931.2.90.ent/arch/s390x/Makefile	2002-08-02 20:39:43.000000000 -0400
+++ linux-2.4.20-2.1.27.z2/arch/s390x/Makefile	2003-04-03 12:10:23.000000000 -0500
@@ -23,10 +23,11 @@
 LINKFLAGS =-T $(TOPDIR)/arch/s390x/vmlinux.lds $(LDFLAGS)
 endif
 MODFLAGS += -fpic
+AFLAGS += -m64
 
 CFLAGS_PIPE := -pipe
 CFLAGS_NSR  := -fno-strength-reduce
-CFLAGS := $(CFLAGS) $(CFLAGS_PIPE) $(CFLAGS_NSR)
+CFLAGS := $(CFLAGS) $(CFLAGS_PIPE) $(CFLAGS_NSR) -m64
 
 HEAD := arch/s390x/kernel/head.o arch/s390x/kernel/init_task.o
 
diff -urN -X dontdiff linux-2.4.20-1.1931.2.90.ent/arch/s390x/vmlinux.lds linux-2.4.20-2.1.27.z2/arch/s390x/vmlinux.lds
--- linux-2.4.20-1.1931.2.90.ent/arch/s390x/vmlinux.lds	2002-02-25 14:37:56.000000000 -0500
+++ linux-2.4.20-2.1.27.z2/arch/s390x/vmlinux.lds	2003-04-03 12:10:24.000000000 -0500
@@ -1,8 +1,8 @@
-/* ld script to make s390 Linux kernel
+/* ld script to make s390x Linux kernel
  * Written by Martin Schwidefsky (schwidefsky@de.ibm.com)
  */
 OUTPUT_FORMAT("elf64-s390", "elf64-s390", "elf64-s390")
-OUTPUT_ARCH(s390)
+OUTPUT_ARCH(s390:64-bit)
 ENTRY(_start)
 jiffies = jiffies_64;
 SECTIONS
#--- linux-2.4.20-1.1931.2.90.ent/Makefile	2003-04-09 16:12:10.000000000 -0400
#+++ linux-2.4.20-1.1931.2.90.z2/Makefile	2003-04-10 14:50:36.000000000 -0400
#@@ -37,7 +37,7 @@
# MAKEFILES	= $(TOPDIR)/.config
# GENKSYMS	= /sbin/genksyms
# DEPMOD		= /sbin/depmod
#-KALLSYMS	= /sbin/kallsyms
#+KALLSYMS	= UNAME_MACHINE=$(ARCH) /sbin/kallsyms
# MODFLAGS	= -DMODULE
# CFLAGS_KERNEL	=
# PERL		= perl
