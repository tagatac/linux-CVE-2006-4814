diff -urNp linux-352/arch/ppc64/config.in linux-353/arch/ppc64/config.in
--- linux-352/arch/ppc64/config.in
+++ linux-353/arch/ppc64/config.in
@@ -8,6 +8,7 @@ define_bool CONFIG_RWSEM_XCHGADD_ALGORIT
 define_bool CONFIG_GENERIC_BUST_SPINLOCK n
 define_bool CONFIG_GENERIC_ISA_DMA y
 define_bool CONFIG_HAVE_DEC_LOCK y
+define_bool CONFIG_COMPAT y
 
 mainmenu_name "64 bit PowerPC Linux Kernel Configuration"
 
diff -urNp linux-352/arch/ppc64/kernel/ioctl32.c linux-353/arch/ppc64/kernel/ioctl32.c
--- linux-352/arch/ppc64/kernel/ioctl32.c
+++ linux-353/arch/ppc64/kernel/ioctl32.c
@@ -48,7 +48,7 @@
 #include <linux/mtio.h>
 #include <linux/cdrom.h>
 #include <linux/loop.h>
-#include <linux/auto_fs.h>
+#include <linux/auto_fs4.h>
 #include <linux/devfs_fs.h>
 #include <linux/tty.h>
 #include <linux/vt_kern.h>
@@ -3769,6 +3769,7 @@ COMPATIBLE_IOCTL(TCSETA),
 COMPATIBLE_IOCTL(TCSETAW),
 COMPATIBLE_IOCTL(TCSETAF),
 COMPATIBLE_IOCTL(TCSBRK),
+COMPATIBLE_IOCTL(TCSBRKP),
 COMPATIBLE_IOCTL(TCXONC),
 COMPATIBLE_IOCTL(TCFLSH),
 COMPATIBLE_IOCTL(TCGETS),
@@ -3804,6 +3805,8 @@ COMPATIBLE_IOCTL(TIOCGSERIAL),
 COMPATIBLE_IOCTL(TIOCSSERIAL),
 COMPATIBLE_IOCTL(TIOCSERGETLSR),
 COMPATIBLE_IOCTL(TIOCSLTC),
+COMPATIBLE_IOCTL(TIOCMIWAIT),
+COMPATIBLE_IOCTL(TIOCGICOUNT),
 /* Big F */
 COMPATIBLE_IOCTL(FBIOGET_VSCREENINFO),
 COMPATIBLE_IOCTL(FBIOPUT_VSCREENINFO),
@@ -3891,6 +3894,7 @@ COMPATIBLE_IOCTL(START_ARRAY),
 COMPATIBLE_IOCTL(STOP_ARRAY),
 COMPATIBLE_IOCTL(STOP_ARRAY_RO),
 COMPATIBLE_IOCTL(RESTART_ARRAY_RW),
+COMPATIBLE_IOCTL(RAID_AUTORUN),
 /* Big K */
 COMPATIBLE_IOCTL(PIO_FONT),
 COMPATIBLE_IOCTL(GIO_FONT),
@@ -4114,6 +4118,7 @@ COMPATIBLE_IOCTL(DVD_AUTH),
 /* Big L */
 COMPATIBLE_IOCTL(LOOP_SET_FD),
 COMPATIBLE_IOCTL(LOOP_CLR_FD),
+COMPATIBLE_IOCTL(LOOP_CHANGE_FD),
 /* Big Q for sound/OSS */
 COMPATIBLE_IOCTL(SNDCTL_SEQ_RESET),
 COMPATIBLE_IOCTL(SNDCTL_SEQ_SYNC),
@@ -4272,6 +4277,11 @@ COMPATIBLE_IOCTL(AUTOFS_IOC_FAIL),
 COMPATIBLE_IOCTL(AUTOFS_IOC_CATATONIC),
 COMPATIBLE_IOCTL(AUTOFS_IOC_PROTOVER),
 COMPATIBLE_IOCTL(AUTOFS_IOC_EXPIRE),
+COMPATIBLE_IOCTL(AUTOFS_IOC_EXPIRE_MULTI),
+COMPATIBLE_IOCTL(AUTOFS_IOC_PROTOSUBVER),
+COMPATIBLE_IOCTL(AUTOFS_IOC_ASKREGHOST),
+COMPATIBLE_IOCTL(AUTOFS_IOC_TOGGLEREGHOST),
+COMPATIBLE_IOCTL(AUTOFS_IOC_ASKUMOUNT),
 /* DEVFS */
 COMPATIBLE_IOCTL(DEVFSDIOC_GET_PROTO_REV),
 COMPATIBLE_IOCTL(DEVFSDIOC_SET_EVENT_MASK),
@@ -4307,6 +4317,7 @@ COMPATIBLE_IOCTL(VG_REMOVE),
 COMPATIBLE_IOCTL(VG_RENAME),
 COMPATIBLE_IOCTL(VG_REDUCE),
 COMPATIBLE_IOCTL(PE_LOCK_UNLOCK),
+COMPATIBLE_IOCTL(PE_LOCKED_COPY),
 COMPATIBLE_IOCTL(PV_FLUSH),
 COMPATIBLE_IOCTL(LVM_LOCK_LVM),
 COMPATIBLE_IOCTL(LVM_GET_IOP_VERSION),
@@ -4698,7 +4709,7 @@ asmlinkage int sys32_ioctl(unsigned int 
 		handler = (void *)t->handler;
 		error = handler(fd, cmd, arg, filp);
 	} else
-		error = -ENOTSUPP;
+		error = -EINVAL;
 out:
 	fput(filp);
 out2:
diff -urNp linux-352/arch/ppc64/kernel/misc.S linux-353/arch/ppc64/kernel/misc.S
--- linux-352/arch/ppc64/kernel/misc.S
+++ linux-353/arch/ppc64/kernel/misc.S
@@ -823,9 +823,9 @@ _GLOBAL(sys_call_table32)
  	.llong .sys_removexattr
  	.llong .sys_lremovexattr
  	.llong .sys_fremovexattr	/* 220 */
- 	.llong .sys_ni_syscall  /* .compat_sys_futex */
- 	.llong .sys_ni_syscall
- 	.llong .sys_ni_syscall
+ 	.llong .compat_sys_futex  /* .compat_sys_futex */
+	.llong .compat_sys_sched_setaffinity
+	.llong .compat_sys_sched_getaffinity
  	.llong .sys_ni_syscall
 #ifdef CONFIG_TUX
 	.llong .__sys_tux		/* 225 */
@@ -836,7 +836,7 @@ _GLOBAL(sys_call_table32)
 	.llong .sys_ni_syscall		/* 225 */
 # endif
 #endif
- 	.llong .sys_ni_syscall
+ 	.llong .sys32_sendfile64
  	.llong .compat_sys_io_setup
  	.llong .sys_io_destroy
  	.llong .compat_sys_io_getevents
@@ -861,7 +861,12 @@ _GLOBAL(sys_call_table32)
  	.llong .sys_ni_syscall
  	.llong .sys_ni_syscall
  	.llong .sys_tgkill		/* 250 */
-	.rept NR_syscalls-251
+ 	.llong .sys_ni_syscall
+ 	.llong .sys_ni_syscall
+ 	.llong .sys_ni_syscall
+ 	.llong .sys_ni_syscall
+ 	.llong .ppc64_rtas		/* 255 */
+	.rept NR_syscalls-256
 	.llong .sys_ni_syscall
 	.endr
 #endif
