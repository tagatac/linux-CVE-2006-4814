diff -urNp linux-5840/fs/nfsd/export.c linux-5850/fs/nfsd/export.c
--- linux-5840/fs/nfsd/export.c
+++ linux-5850/fs/nfsd/export.c
@@ -965,8 +965,9 @@ exp_fodrop(struct nfsctl_fodrop *nfp)
 	retval = -EACCES;
 	if (nd.mnt->mnt_flags & MNT_NODEV)
 		goto dput_and_out;
-	dev = to_kdev_t(inode->i_bdev->bd_dev);
 	retval = -ENXIO;
+
+	dev = inode->i_rdev;
 	if (MAJOR(dev) >= MAX_BLKDEV)
 		goto dput_and_out;
 	retval = -ENOMEM;
@@ -1044,7 +1045,7 @@ exp_stopfodrop(struct nfsctl_fodrop *nfp
 	retval = -EACCES;
 	if (nd.mnt->mnt_flags & MNT_NODEV)
 		goto dput_and_out;
-	dev = to_kdev_t(inode->i_bdev->bd_dev);
+	dev = inode->i_rdev;
 	retval = -ENXIO;
 	if (MAJOR(dev) >= MAX_BLKDEV)
 		goto dput_and_out;
