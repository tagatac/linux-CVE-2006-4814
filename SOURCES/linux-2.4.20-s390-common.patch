diff -urNp linux-279/arch/s390/kernel/s390_ksyms.c linux-420/arch/s390/kernel/s390_ksyms.c
--- linux-279/arch/s390/kernel/s390_ksyms.c
+++ linux-420/arch/s390/kernel/s390_ksyms.c
@@ -21,6 +21,7 @@
 EXPORT_SYMBOL_NOVERS(_oi_bitmap);
 EXPORT_SYMBOL_NOVERS(_ni_bitmap);
 EXPORT_SYMBOL_NOVERS(_zb_findmap);
+EXPORT_SYMBOL_NOVERS(_sb_findmap);
 EXPORT_SYMBOL_NOVERS(__copy_from_user_asm);
 EXPORT_SYMBOL_NOVERS(__copy_to_user_asm);
 EXPORT_SYMBOL_NOVERS(__clear_user_asm);
@@ -67,3 +68,11 @@ EXPORT_SYMBOL(get_storage_key);
 EXPORT_SYMBOL_NOVERS(do_call_softirq);
 EXPORT_SYMBOL(ctrlchar_init);
 EXPORT_SYMBOL(ctrlchar_handle);
+EXPORT_SYMBOL(show_trace);
+
+/*
+ * More
+ */
+#ifdef CONFIG_SMP
+EXPORT_SYMBOL(cpu_online_map);
+#endif
diff -urNp linux-279/arch/s390/lib/uaccess.S linux-420/arch/s390/lib/uaccess.S
--- linux-279/arch/s390/lib/uaccess.S
+++ linux-420/arch/s390/lib/uaccess.S
@@ -19,8 +19,8 @@ __copy_from_user_asm:
 	sacf	512
 0:	mvcle	%r2,%r4,0
 	jo	0b
-1:	sacf	0
 	lr	%r2,%r5
+1:	sacf	0
 	br	%r14
 2:	lhi	%r1,-4096
 	lr	%r3,%r4
@@ -28,17 +28,23 @@ __copy_from_user_asm:
 	nr	%r3,%r1      # %r3 = (%r4 + 4096) & -4096
 	slr	%r3,%r4      # %r3 = #bytes to next user page boundary
 	clr	%r5,%r3      # copy crosses next page boundary ?
-	jnh	1b           # no, this page fauled
+	jnh	4f           # no, this page faulted
 	# The page after the current user page might have faulted.
-	# We cant't find out which page because the program check handler
+	# We can't find out which page because the program check handler
 	# might have callled schedule, destroying all lowcore information.
 	# We retry with the shortened length.
 3:	mvcle	%r2,%r4,0
 	jo	3b
+4:	lr	%r1,%r5      # pad remaining bytes with 0
+	lr	%r3,%r5
+	slr	%r5,%r5
+5:	mvcle	%r2,%r4,0
+	jo	5b
+	lr	%r2,%r1
 	j	1b
         .section __ex_table,"a"
 	.long	0b,2b
-	.long	3b,1b
+	.long	3b,4b
         .previous
 
         .align 4
diff -urNp linux-279/arch/s390x/kernel/s390_ksyms.c linux-420/arch/s390x/kernel/s390_ksyms.c
--- linux-279/arch/s390x/kernel/s390_ksyms.c
+++ linux-420/arch/s390x/kernel/s390_ksyms.c
@@ -24,6 +24,7 @@
 EXPORT_SYMBOL_NOVERS(_oi_bitmap);
 EXPORT_SYMBOL_NOVERS(_ni_bitmap);
 EXPORT_SYMBOL_NOVERS(_zb_findmap);
+EXPORT_SYMBOL_NOVERS(_sb_findmap);
 EXPORT_SYMBOL_NOVERS(__copy_from_user_asm);
 EXPORT_SYMBOL_NOVERS(__copy_to_user_asm);
 EXPORT_SYMBOL_NOVERS(__clear_user_asm);
@@ -77,6 +78,9 @@ EXPORT_SYMBOL(register_ioctl32_conversio
 EXPORT_SYMBOL(unregister_ioctl32_conversion);
 #endif
 
+extern asmlinkage int sys_ioctl(unsigned int fd, unsigned int cmd, unsigned long arg);
+EXPORT_SYMBOL(sys_ioctl);
+
 /*
  * misc.
  */
@@ -88,3 +92,11 @@ EXPORT_SYMBOL(console_device);
 EXPORT_SYMBOL_NOVERS(do_call_softirq);
 EXPORT_SYMBOL(ctrlchar_init);
 EXPORT_SYMBOL(ctrlchar_handle);
+EXPORT_SYMBOL(show_trace);
+
+/*
+ * More
+ */
+#ifdef CONFIG_SMP
+EXPORT_SYMBOL(cpu_online_map);
+#endif
diff -urNp linux-279/arch/s390x/lib/uaccess.S linux-420/arch/s390x/lib/uaccess.S
--- linux-279/arch/s390x/lib/uaccess.S
+++ linux-420/arch/s390x/lib/uaccess.S
@@ -19,8 +19,8 @@ __copy_from_user_asm:
 	sacf	512
 0:	mvcle	%r2,%r4,0
 	jo	0b
-1:	sacf	0
 	lgr	%r2,%r5
+1:	sacf	0
 	br	%r14
 2:	lghi	%r1,-4096
 	lgr	%r3,%r4
@@ -28,17 +28,23 @@ __copy_from_user_asm:
 	ngr	%r3,%r1      # %r3 = (%r4 + 4096) & -4096
 	slgr	%r3,%r4      # %r3 = #bytes to next user page boundary
 	clgr	%r5,%r3      # copy crosses next page boundary ?
-	jnh	1b           # no, this page fauled
+	jnh	4f           # no, this page faulted
 	# The page after the current user page might have faulted.
-	# We cant't find out which page because the program check handler
+	# We can't find out which page because the program check handler
 	# might have callled schedule, destroying all lowcore information.
 	# We retry with the shortened length.
 3:	mvcle	%r2,%r4,0
 	jo	3b
+4:	lgr	%r1,%r5      # pad remaining bytes with 0
+	lgr	%r3,%r5
+	slgr	%r5,%r5
+5:	mvcle	%r2,%r4,0
+	jo	5b
+	lgr	%r2,%r1
 	j	1b
         .section __ex_table,"a"
 	.quad	0b,2b
-	.quad	3b,1b
+	.quad	3b,4b
         .previous
 
         .align 4
diff -urNp linux-279/include/asm-s390/kmap_types.h linux-420/include/asm-s390/kmap_types.h
--- linux-279/include/asm-s390/kmap_types.h
+++ linux-420/include/asm-s390/kmap_types.h
@@ -0,0 +1,23 @@
+#ifdef __KERNEL__
+#ifndef _ASM_KMAP_TYPES_H
+#define _ASM_KMAP_TYPES_H
+
+enum km_type {
+	KM_BOUNCE_READ,
+	KM_SKB_SUNRPC_DATA,
+	KM_SKB_DATA_SOFTIRQ,
+	KM_USER0,
+	KM_USER1,
+	KM_BIO_SRC_IRQ,
+	KM_BIO_DST_IRQ,
+	KM_PTE0,
+	KM_PTE1,
+	KM_IRQ0,
+	KM_IRQ1,
+	KM_SOFTIRQ0,
+	KM_SOFTIRQ1,	
+	KM_TYPE_NR
+};
+
+#endif
+#endif /* __KERNEL__ */
diff -urNp linux-279/include/asm-s390/processor.h linux-420/include/asm-s390/processor.h
--- linux-279/include/asm-s390/processor.h
+++ linux-420/include/asm-s390/processor.h
@@ -50,6 +50,8 @@ struct cpuinfo_S390
 
 extern void print_cpu_info(struct cpuinfo_S390 *);
 
+extern void show_trace(unsigned long* esp);
+
 /* Lazy FPU handling on uni-processor */
 extern struct task_struct *last_task_used_math;
 
diff -urNp linux-279/include/asm-s390x/kmap_types.h linux-420/include/asm-s390x/kmap_types.h
--- linux-279/include/asm-s390x/kmap_types.h
+++ linux-420/include/asm-s390x/kmap_types.h
@@ -0,0 +1,23 @@
+#ifdef __KERNEL__
+#ifndef _ASM_KMAP_TYPES_H
+#define _ASM_KMAP_TYPES_H
+
+enum km_type {
+	KM_BOUNCE_READ,
+	KM_SKB_SUNRPC_DATA,
+	KM_SKB_DATA_SOFTIRQ,
+	KM_USER0,
+	KM_USER1,
+	KM_BIO_SRC_IRQ,
+	KM_BIO_DST_IRQ,
+	KM_PTE0,
+	KM_PTE1,
+	KM_IRQ0,
+	KM_IRQ1,
+	KM_SOFTIRQ0,
+	KM_SOFTIRQ1,	
+	KM_TYPE_NR
+};
+
+#endif
+#endif /* __KERNEL__ */
diff -urNp linux-279/include/asm-s390x/processor.h linux-420/include/asm-s390x/processor.h
--- linux-279/include/asm-s390x/processor.h
+++ linux-420/include/asm-s390x/processor.h
@@ -52,6 +52,8 @@ struct cpuinfo_S390
 
 extern void print_cpu_info(struct cpuinfo_S390 *);
 
+extern void show_trace(unsigned long* esp);
+
 /* Lazy FPU handling on uni-processor */
 extern struct task_struct *last_task_used_math;
 
