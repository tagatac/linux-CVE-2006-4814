diff -urNp ../kernel-2.4.21.vanilla/linux-2.4.21/include/linux/pci.h linux-2.4.21/include/linux/pci.h
--- ../kernel-2.4.21.vanilla/linux-2.4.21/include/linux/pci.h	2003-07-29 12:37:05.000000000 -0400
+++ linux-2.4.21/include/linux/pci.h	2003-07-29 12:42:42.000000000 -0400
@@ -452,10 +452,20 @@ struct pci_bus {
 	void		*sysdata;	/* hook for sys-specific extension */
 	struct proc_dir_entry *procdir;	/* directory entry in /proc/bus/pci */
 
+#ifdef CONFIG_PPC64
+	/* needed until PCI domain support is backported,
+	 * to both kernel and userspace
+	 */
+	unsigned int	number;		/* bus number */
+	unsigned int	primary;	/* number of primary bridge */
+	unsigned int	secondary;	/* number of secondary bridge */
+	unsigned int	subordinate;	/* max number of subordinate buses */
+#else
 	unsigned char	number;		/* bus number */
 	unsigned char	primary;	/* number of primary bridge */
 	unsigned char	secondary;	/* number of secondary bridge */
 	unsigned char	subordinate;	/* max number of subordinate buses */
+#endif
 
 	char		name[48];
 	unsigned short	vendor;
